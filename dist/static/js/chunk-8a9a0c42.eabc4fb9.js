(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8a9a0c42"],{1583:function(e,t,a){"use strict";var r=a("77f0"),n=a.n(r);n.a},"1b62":function(e,t,a){"use strict";t["a"]={methods:{uploadBefore:function(e){if(console.log(e,2222),!this.checkFile(e))return!1},uploadSuccess:function(e,t,a,r){e.result&&this.afterUpload(e.msg,a,r)},uploadRemove:function(e,t,a,r){this.onRemoveFile(a,r)}}}},"3ca3":function(e,t,a){"use strict";var r=a("6547").charAt,n=a("69f3"),o=a("7dd0"),l="String Iterator",s=n.set,i=n.getterFor(l);o(String,"String",(function(e){s(this,{type:l,string:String(e),index:0})}),(function(){var e,t=i(this),a=t.string,n=t.index;return n>=a.length?{value:void 0,done:!0}:(e=r(a,n),t.index+=e.length,{value:e,done:!1})}))},"77f0":function(e,t,a){},a2c8:function(e,t,a){e.exports=a.p+"static/img/avatar-upload.80d54d4f.png"},b0c0:function(e,t,a){var r=a("83ab"),n=a("9bf2").f,o=Function.prototype,l=o.toString,s=/^\s*function ([^ (]*)/,i="name";r&&!(i in o)&&n(o,i,{configurable:!0,get:function(){try{return l.call(this).match(s)[1]}catch(e){return""}}})},b64b:function(e,t,a){var r=a("23e7"),n=a("7b0b"),o=a("df75"),l=a("d039"),s=l((function(){o(1)}));r({target:"Object",stat:!0,forced:s},{keys:function(e){return o(n(e))}})},c2e5:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("h1",{staticClass:"title"},[e._v("基本信息")]),a("section",{staticClass:"form-box",staticStyle:{"margin-top":"30px"}},[a("el-card",{staticClass:"form-card"},[a("div",{staticClass:"flex-vc form-name"},[a("label",{attrs:{for:""}},[e._v("手机号")]),a("p",[e._v(e._s(e.user.userName))])]),e.isReg?e._e():a("div",{staticClass:"flex-vc form-name"},[a("label",{attrs:{for:""}},[e._v("密码")]),a("p",{staticStyle:{"margin-right":"30px"}},[e._v("**********")]),a("el-button",{attrs:{size:"small"},on:{click:e.handleClickChangePwd}},[e._v("修改密码")])],1),a("quick-form",{ref:"baseInfo",attrs:{model:e.baseInfo,labelWidth:"140px"}})],1)],1),a("h1",{staticClass:"title bottom"},[e._v("最高学历")]),a("section",{staticClass:"form-box"},[a("el-card",{staticClass:"form-card"},[a("quick-form",{ref:"education",attrs:{model:e.education,labelWidth:"140px"}})],1)],1),a("div",{staticClass:"flex-he",staticStyle:{margin:"60px 60px 70px 0"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handleSave}},[e._v("确定")])],1)])},n=[],o=(a("caad"),a("d81d"),a("b64b"),a("d3b7"),a("ac1f"),a("2532"),a("3ca3"),a("5319"),a("ddb0"),a("96cf"),a("1da1")),l=a("5530"),s=a("2f62"),i=a("4d06"),u=a("2b0e"),c=a("c1df"),d=a.n(c),p=u["default"].prototype.$rules,f={passWord:{value:"",label:"密码",rules:[p.required(),p.length(6,12)],props:{type:"password"}},name:{value:"",label:"姓名",rules:[p.required(),p.maxLength(20)]},nickName:{value:"",label:"昵称",rules:[p.required(),p.maxLength(10)]},gender:{label:"性别",value:"",type:"radio",props:{label:"label",value:"value"},options:[{label:"男",value:"m"},{label:"女",value:"f"}],rules:[p.required()]},birthday:{label:"出生年月",value:"",type:"date",rules:[p.required()],props:{style:{width:"200px"},"picker-options":{disabledDate:function(e){return e.getTime()>d()().valueOf()}}}},avatarImage:{label:"设置头像",rules:[p.required()],type:"upload",value:"",props:{action:"http://www.leavesyesong.xyz/api/user/platform/consumer/upload",accept:".jpg,.png,.gif",name:"UploadFiles",disabled:!1,"show-file-list":!1,"auto-upload":!0,"before-upload":null,"on-success":null},render:null}},v=u["default"].prototype.$rules,b={country:{type:"select",value:"",label:"国家",rules:[v.required()],props:{props:{label:"text",value:"value"}},options:[{text:"中国",value:"1"},{text:"美国",value:"2"}]},school:{type:"select",value:"",label:"学校",rules:[v.required()],props:{props:{label:"text",value:"value"}},options:[{text:"北大",value:"1"},{text:"清华",value:"2"}]},discipline:{type:"select",value:"",label:"专业",rules:[v.required()],props:{props:{label:"text",value:"value"}},options:[{text:"计算机",value:"1"},{text:"工商管理",value:"2"}]},GPA:{type:"select",value:"",label:"GPA",props:{props:{label:"text",value:"value"}},options:[{text:"70分",value:"1"},{text:"80分",value:"2"}]},degree:{type:"select",value:"",label:"学位",rules:[v.required()],props:{props:{label:"text",value:"value"}},options:[{text:"学士",value:"1"},{text:"硕士",value:"2"}]},graduationTime:{label:"毕业时间",value:"",type:"date",rules:[v.required()],props:{style:{width:"200px"},"picker-options":{disabledDate:function(e){return e.getTime()>d()().valueOf()}}}},selfIntroduction:{value:"",label:"自我介绍",rules:[v.maxLength(300)]},detailedIntroduction:{value:"",label:"详细介绍",rules:[v.maxLength(300)],props:{type:"textarea",rows:6,placeholder:"请输入详细内容"}}},m={baseInfo:f,education:b},g=a("1b62");a("b0c0");function h(e){return{userName:e.userName,passWord:e.passWord,basic:{birthday:e.birthday,name:e.name,gender:e.gender,nickName:e.nickName,avatarImage:e.avatarImage,selfIntroduction:e.selfIntroduction,detailedIntroduction:e.detailedIntroduction,highestEducation:{country:e.country,school:e.school,discipline:e.discipline,degree:e.degree,graduationTime:e.graduationTime,GPA:e.GPA}}}}function x(e,t){var a=e.account,r=e.basic,n=t.baseInfo;n.passWord.value=a.passWord,n.name.value=r.name,n.nickName.value=r.nickName,n.gender.value=r.gender,n.birthday.value=r.birthday,n.avatarImage.value=r.avatarImage;var o=t.education,l=r.highestEducation;return o.country.value=l.country,o.school.value=l.school,o.discipline.value=l.discipline,o.degree.value=l.degree,o.graduationTime.value=l.graduationTime,o.GPA.value=l.GPA,o.selfIntroduction.value=r.selfIntroduction,o.detailedIntroduction.value=r.detailedIntroduction,t}var y=a("c24f"),I=a("a2c8"),k=a.n(I),w=a("5f87"),_={name:"consumer-baseinfo",mixins:[g["a"]],components:{QuickForm:i["a"]},data:function(){return Object(l["a"])({isReg:!1},m)},computed:Object(l["a"])({},Object(s["b"])(["user"])),created:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.isReg=e.$route.path.includes("/register/consumer"),e.isReg&&(e.baseInfo.passWord.hide=!1),a=e.baseInfo.avatarImage,a.props["before-upload"]=function(t){return e.uploadBefore(t)},a.props["on-success"]=function(t,a){return e.uploadSuccess(t,a,e.uploadCb)},a.render=e.renderUpload,e.isReg){t.next=13;break}return r=e.loading(),t.next=10,Object(y["e"])().catch((function(e){return r.close()}));case 10:n=t.sent,n.result&&x(n.msg,e._data),r.close();case 13:case"end":return t.stop()}}),t)})))()},methods:{handleClickChangePwd:function(){},handleSave:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,r,n,o,s,i,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=Object.keys(m),r=!0,t.next=4,Promise.all(a.map((function(t){return e.$refs[t].validate()}))).catch((function(e){console.log(e,"error"),r=!1}));case 4:if(n=t.sent,console.log(n,333),!r){t.next=24;break}if(o=Object(l["a"])(Object(l["a"])({userName:e.user.userName},e.$refs.baseInfo.getFormData()),e.$refs.education.getFormData()),console.log(o,"formdata"),s=h(o),console.log(s,"参数"),i=e.loading(),u=null,!e.isReg){t.next=19;break}return t.next=16,Object(y["i"])(s).catch((function(e){return i.close()}));case 16:u=t.sent,t.next=22;break;case 19:return t.next=21,Object(y["k"])(s).catch((function(e){return i.close()}));case 21:u=t.sent;case 22:u.result&&(e.alert(e.isReg?"注册成功":"保存成功"),e.isReg?(Object(w["c"])(u.msg.token),e.$router.replace("/consumer/index")):e.$store.dispatch("user/setUser",{nickName:o.nickName,avatar:o.avatarImage})),i.close();case 24:case"end":return t.stop()}}),t)})))()},renderUpload:function(e){var t="";return this.baseInfo.avatarImage.value&&(t=Object({NODE_ENV:"production",VUE_APP_BASE_API:"http://www.leavesyesong.xyz/api",BASE_URL:"/"}).VUE_APP_HOST_NAME+this.baseInfo.avatarImage.value),console.log(t),e("el-Image",{style:"border-radius: 50%;width: 90px; height: 90px;overflow: hidden",attrs:{src:t||k.a}})},checkFile:function(e){return e.size>2097152?(this.alert("上传图片不能超过2M"),!1):!!["image/png","image/jpeg","image/gif"].includes(e.type)||(this.alert("请上传PNG、JPG、GIF类型文件"),!1)},afterUpload:function(e){this.baseInfo.avatarImage.value=e}}},O=_,j=(a("1583"),a("2877")),N=Object(j["a"])(O,r,n,!1,null,"03d2b416",null);t["default"]=N.exports},d81d:function(e,t,a){"use strict";var r=a("23e7"),n=a("b727").map,o=a("1dde"),l=a("ae40"),s=o("map"),i=l("map");r({target:"Array",proto:!0,forced:!s||!i},{map:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},ddb0:function(e,t,a){var r=a("da84"),n=a("fdbc"),o=a("e260"),l=a("9112"),s=a("b622"),i=s("iterator"),u=s("toStringTag"),c=o.values;for(var d in n){var p=r[d],f=p&&p.prototype;if(f){if(f[i]!==c)try{l(f,i,c)}catch(b){f[i]=c}if(f[u]||l(f,u,d),n[d])for(var v in o)if(f[v]!==o[v])try{l(f,v,o[v])}catch(b){f[v]=o[v]}}}}}]);