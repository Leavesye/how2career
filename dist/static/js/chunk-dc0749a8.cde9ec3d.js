(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dc0749a8"],{"100e":function(t,s,e){"use strict";var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("el-dialog",{attrs:{title:"学历信息",visible:t.isShow,"before-close":t.handleClose,width:"500px",center:""},on:{"update:visible":function(s){t.isShow=s}}},[e("section",{staticClass:"modal-main"},t._l(t.edus,(function(s,i){return e("div",{key:i,staticClass:"d-item"},[e("p",{staticClass:"field-name title"},[t._v("学历信息")]),e("p",[t._v(t._s(s.desc))])])})),0),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"success"},on:{click:t.handleClose}},[t._v("关闭")])],1)])},n=[],a={props:["edus","isShow"],data:function(){return{}},methods:{handleClose:function(){this.$emit("close")}}},o=a,r=(e("af91"),e("2877")),c=Object(r["a"])(o,i,n,!1,null,"15ee85a5",null);s["a"]=c.exports},"2b54":function(t,s,e){},"49bc":function(t,s,e){"use strict";var i=e("4ff5"),n=e.n(i);n.a},"4ff5":function(t,s,e){},5594:function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticStyle:{padding:"30px"}},[e("section",{staticClass:"flex"},[e("el-card",{staticClass:"card-l"},[e("div",{staticClass:"title",staticStyle:{"margin-bottom":"40px"}},[t._v("咨询师")]),e("div",{staticClass:"header"},[e("avatar",{attrs:{imgUrl:t.info.avatar}}),e("div",{staticClass:"micro ani"},[e("i",{staticClass:"iconfont iconhuatong"})])],1),e("p",{staticClass:"user-name"},[t._v(t._s(t.info.name))])]),e("el-card",{staticClass:"card-c"},[e("p",{staticClass:"title"},[t._v("咨询问题")]),e("div",{staticClass:"q-box"},t._l(t.info.question,(function(s,i){return e("p",{key:i,staticClass:"question"},[t._v(t._s(s)+"?")])})),0)]),e("el-card",{staticClass:"card-r"},[e("p",{staticClass:"title",staticStyle:{"margin-bottom":"28px"}},[t._v("咨询开始时间")]),e("p",[t._v("北京时间")]),e("p",[t._v(t._s(t.info.startText))]),e("p",{staticClass:"ques-status"},[t._v("咨询中")]),e("count-down",{attrs:{bg:"#36AE82",targetTime:t.info.startTime}})],1)],1),e("el-card",{staticClass:"detail-card"},[e("div",{staticClass:"d-item"},[e("p",{staticClass:"field-name title"},[t._v("最高学历")]),e("div",{staticClass:"flex-hbc"},[e("span",[t._v(t._s(t.edu.desc))]),t.edus.length>1?e("el-button",{attrs:{plain:""},on:{click:t.toggleEdu}},[t._v("更多")]):t._e()],1)]),e("div",{staticClass:"d-item"},[e("p",{staticClass:"field-name title"},[t._v("工作信息")]),e("p",[t._v("所属行业："+t._s(t.work.industry))]),e("div",{staticClass:"flex-hbc"},[e("div",{staticClass:"flex work-item"},[e("span",[t._v("公司名称："+t._s(t.work.company))]),e("span",[t._v("职位："+t._s(t.work.position))]),e("span",[t._v("工作年限："+t._s(t.work.workingYears))])]),t.works.length>1?e("el-button",{attrs:{plain:""},on:{click:t.toggleWork}},[t._v("更多")]):t._e()],1)]),e("div",{staticClass:"d-item"},[e("p",{staticClass:"field-name title"},[t._v("主要工作内容")]),e("p",[t._v(t._s(t.work.duty))])]),e("div",{staticClass:"d-item"},[e("p",{staticClass:"field-name title"},[t._v("工作个人技能")]),e("p",[t._v(t._s(t.info.skills))])]),e("div",{staticClass:"flex-he"},[e("el-button",{staticClass:"stop-btn",attrs:{type:"success"},on:{click:t.handleLeaveRoom}},[t._v("结束服务")])],1)]),e("room-status",{attrs:{isShow:t.isShow,targetTime:t.info.startTime,info:t.info},on:{start:t.handleChatStart}}),e("more-edu",{attrs:{isShow:t.isShowEdu,edus:t.edus},on:{close:t.toggleEdu}}),e("more-work",{attrs:{isShow:t.isShowWork,works:t.works},on:{close:t.toggleWork}})],1)},n=[],a=(e("99af"),e("7db0"),e("a15b"),e("d81d"),e("b0c0"),e("d3b7"),e("25f0"),e("3ca3"),e("ddb0"),e("96cf"),e("1da1")),o=e("3628"),r=e("c1df"),c=e.n(r),l=e("77c0"),d=e("8b5c"),u=e("b1b6"),f=e("100e"),m=e("7779"),v=e("f8b7"),h=e("c24f"),p=e("420d"),_={name:"room",components:{Avatar:l["a"],CountDown:d["a"],RoomStatus:u["a"],MoreEdu:f["a"],MoreWork:m["a"]},data:function(){return{isShow:!0,isShowEdu:!1,isShowWork:!1,work:{},works:[],edu:{},edus:[],info:{},targetTime:0}},created:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function s(){var e,i,n,a,o,r,l,d,u,f,m,_,w,b,C,g,k,x,S,y,I,T,E,j,O,W,R,$;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return t.orderId=t.$route.params.id,e=t.loading(),s.next=4,Promise.all([Object(v["e"])({orderId:t.orderId}),Object(h["e"])(),Object(p["d"])()]).catch((function(t){return e.close()}));case 4:if(i=s.sent,!i[0].result){s.next=13;break}return n=i[0].msg,a=n.consultant,o=a.avatar,r=a.name,l=a._id,d=n.consumer,u=n.startTime,f=n.question,m=n.roomId,_=n.slotId,w=i[1].msg,b=w.countries,C=w.majors,g=w.degrees,k=w.industry,x=w.gender,t.initRtcClient(m,l,i[2].msg),s.next=11,Object(h["h"])({userId:l}).catch((function(t){return e.close()}));case 11:S=s.sent,S.result&&(y=S.msg.publicInfo,I=y.birthday,T=y.gender,E=y.selfIntroduction,j=y.detailedIntroduction,O=y.resume,W=O.education,R=O.workExperience,$=O.skills,t.info={slotId:_,consultantId:l,consumerId:d,orderId:t.orderId,roomId:m,birthday:I,detailedIntroduction:j,selfIntroduction:E,gender:x.find((function(t){return t.value==T})).text,startTime:u,question:f,avatar:o,name:r,startText:c()(1e3*u).format("MM月DD日 HH:mm")+"~"+c()(1e3*u).subtract("-90","minutes").format("HH:mm"),skills:$?$.toString():""},t.edus=W.map((function(t){var s=b.find((function(s){return s.value==t.country})).schools,e=s.find((function(s){return s.value==t.school})).text,i=C.find((function(s){return s.value==t.discipline})).text,n=g.find((function(s){return s.value==t.degree})).text;return{desc:"".concat(e," ").concat(i," ").concat(n)}})),t.edu=t.edus[0],t.works=R.map((function(t){var s=t.resignationTime?c()(t.resignationTime).valueOf():c()().valueOf(),e=Math.ceil((s-c()(t.entryTime).valueOf())/31536e6);return{company:t.company,industry:t.industry,industryText:k.find((function(s){return s.value==t.industry})).text,position:t.position,workingYears:e?"".concat(e,"年"):"",duty:t.duty}})),t.work=t.works[0]);case 13:e.close();case 14:case"end":return s.stop()}}),s)})))()},methods:{initRtcClient:function(t,s,e){console.log(t,s,e,"参数"),this.rtc=new o["a"]({userSig:e,userId:s,roomId:t}),this.rtc.join(),console.log(this.rtc,"rtc")},handleChatStart:function(){this.isShow=!1,this.rtc.join()},toggleEdu:function(){this.isShowEdu=!this.isShowEdu},toggleWork:function(){this.isShowWork=!this.isShowWork},handleLeaveRoom:function(){var t=this;this.$alert("点击服务确认将结束此次服务，无法再次进入房间","服务结束确认",{confirmButtonText:"确认",callback:function(s){console.log(s),"confirm"==s&&Object(v["o"])({orderId:t.orderId}).then((function(s){s.result&&(t.rtc.leave(),t.alert("服务已结束"))}))}})}},mounted:function(){}},w=_,b=(e("49bc"),e("2877")),C=Object(b["a"])(w,i,n,!1,null,"33bb0ba5",null);s["default"]=C.exports},7779:function(t,s,e){"use strict";var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("el-dialog",{attrs:{title:"工作信息",visible:t.isShow,"before-close":t.handleClose,width:"560px",center:""},on:{"update:visible":function(s){t.isShow=s}}},[e("section",{staticClass:"modal-main"},t._l(t.works,(function(s,i){return e("div",{key:i,staticClass:"d-item"},[e("p",{staticClass:"field-name title"},[t._v("工作信息")]),e("p",[t._v("所属行业："+t._s(s.industryText))]),e("div",{staticClass:"flex-hbc fields"},[e("p",{staticClass:"field-name"},[t._v("公司名称："+t._s(s.company))]),e("p",{staticClass:"field-name"},[t._v("职位："+t._s(s.position))]),e("p",{staticClass:"field-name"},[t._v("工作年限："+t._s(s.workingYears))])])])})),0),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"success"},on:{click:t.handleClose}},[t._v("关闭")])],1)])},n=[],a={props:["works","isShow"],data:function(){return{}},methods:{handleClose:function(){this.$emit("close")}}},o=a,r=(e("f83a"),e("2877")),c=Object(r["a"])(o,i,n,!1,null,"695417c3",null);s["a"]=c.exports},"9e5f":function(t,s,e){},af91:function(t,s,e){"use strict";var i=e("9e5f"),n=e.n(i);n.a},f83a:function(t,s,e){"use strict";var i=e("2b54"),n=e.n(i);n.a}}]);