(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b88256f0"],{"15fd":function(e,a,t){"use strict";function r(e,a){if(null==e)return{};var t,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],a.indexOf(t)>=0||(n[t]=e[t]);return n}function n(e,a){if(null==e)return{};var t,n,i=r(e,a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)t=s[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}t.d(a,"a",(function(){return n}))},"1b62":function(e,a,t){"use strict";a["a"]={methods:{uploadBefore:function(e){if(console.log(e,2222),!this.checkFile(e))return!1},uploadSuccess:function(e,a,t,r){e.result&&this.afterUpload(e.msg,t,r)},uploadRemove:function(e,a,t,r){this.onRemoveFile(t,r)}}}},"3ca3":function(e,a,t){"use strict";var r=t("6547").charAt,n=t("69f3"),i=t("7dd0"),s="String Iterator",o=n.set,l=n.getterFor(s);i(String,"String",(function(e){o(this,{type:s,string:String(e),index:0})}),(function(){var e,a=l(this),t=a.string,n=a.index;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),a.index+=e.length,{value:e,done:!1})}))},"5a2c":function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("section",[t("h1",{staticClass:"title"},[e._v("基本信息")]),t("section",{staticClass:"form-box",staticStyle:{"margin-top":"30px"}},[t("el-card",{staticClass:"form-card"},[t("div",{staticClass:"flex-vc form-name"},[t("label",{attrs:{for:""}},[e._v("手机号")]),t("p",[e._v(e._s(e.user.userName))])]),e.isReg?e._e():t("div",{staticClass:"flex-vc form-name"},[t("label",{attrs:{for:""}},[e._v("密码")]),t("p",{staticStyle:{"margin-right":"30px"}},[e._v("**********")]),t("el-button",{attrs:{size:"small"},on:{click:e.handleClickChangePwd}},[e._v("修改密码")])],1),t("quick-form",{ref:"baseInfo",attrs:{model:e.baseInfo,labelWidth:"140px"}})],1)],1),t("h1",{staticClass:"title bottom"},[e._v("实名认证（"+e._s(e.realVerified?"已认证":"未认证")+"）")]),t("section",{staticClass:"form-box"},[t("el-card",{staticClass:"form-card"},[e.isReg?e._e():t("div",{staticClass:"flex form-name"},[t("label",{attrs:{for:""}},[t("span",{staticStyle:{color:"#F56C6C"}},[e._v("*")]),e._v("姓名")]),t("p",[e._v("超级玛丽")])]),t("quick-form",{ref:"realVerify",attrs:{model:e.realVerify,labelWidth:"140px"}}),e.isReg?e._e():t("div",{staticClass:"flex-vc form-name"},[t("label",{attrs:{for:""}}),t("el-button",{attrs:{plain:"",type:"primary",size:"small"},on:{click:e.handleVerify}},[e._v("重新认证")])],1)],1)],1),t("h1",{staticClass:"title bottom"},[e._v("联系方式")]),t("section",{staticClass:"form-box"},[t("el-card",{staticClass:"form-card"},[t("quick-form",{ref:"contact",attrs:{model:e.contact,labelWidth:"140px"}})],1)],1),t("div",{staticClass:"flex-he",staticStyle:{margin:"60px 60px 70px 0"}},[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handleSave}},[e._v("确定")])],1)])},n=[],i=(t("caad"),t("d81d"),t("b0c0"),t("b64b"),t("d3b7"),t("ac1f"),t("2532"),t("3ca3"),t("5319"),t("ddb0"),t("15fd")),s=(t("96cf"),t("1da1")),o=t("5530"),l=t("2f62"),c=t("4d06"),u=t("2b0e"),d=t("c1df"),f=t.n(d),p=u["default"].prototype.$rules,b={passWord:{value:"",label:"密码",props:{type:"password"},rules:[p.required(),p.length(6,12)],hide:!1},name:{value:"",label:"姓名",rules:[p.required(),p.maxLength(20)]},nickName:{value:"",label:"昵称",rules:[p.required(),p.maxLength(10)]},gender:{label:"性别",value:"",type:"radio",props:{label:"label",value:"value"},options:[{label:"男",value:"m"},{label:"女",value:"f"}],rules:[p.required()]},birthday:{label:"出生年月",value:f()().subtract(18,"year").format("YYYY-MM-DD"),type:"date",rules:[p.required()],props:{style:{width:"200px"},"picker-options":{disabledDate:function(e){return e.getTime()>f()().subtract(18,"year").valueOf()}}}},avatarImage:{label:"设置头像",rules:[p.required()],type:"upload",value:"",props:{action:"http://www.leavesyesong.xyz/api/user/platform/consultant/upload",accept:".jpg,.png,.gif",name:"UploadFiles",disabled:!1,"show-file-list":!1,"auto-upload":!0,"before-upload":null,"on-success":null},render:null}},m=u["default"].prototype.$rules,v={phoneNumber:{value:"",label:"手机号码",rules:[m.required(),m.mobile()]},idCard:{value:"",label:"身份证号",rules:[m.required(),m.idCard()]},bankCard:{value:"",label:"银行卡信息",rules:[m.required(),m.length(13,19)]}},h=u["default"].prototype.$rules,g={phone:{value:"",label:"手机号码",rules:[h.required(),h.mobile()]},wechat:{value:"",label:"微信号",rules:[h.maxLength(50)]},email:{value:"",label:"私人邮箱",rules:[h.maxLength(100),h.eMail()]},selfIntroduction:{value:"",label:"自我介绍",props:{type:"textarea",rows:"3"},events:{},rules:[h.maxLength(300)]},detailedIntroduction:{label:"奖励和荣誉",value:"",props:{type:"textarea",rows:"6"},events:{},rules:[h.maxLength(300)]}},y={baseInfo:b,realVerify:v,contact:g},x=t("1b62");function I(e,a){return a||(a={account:{},basic:{},realVerify:{},publicInfo:{}}),a.account.userName=e.userName,a.account.passWord=e.passWord,a.basic.name=e.name,a.basic.gender=e.gender,a.basic.birthday=e.birthday,a.publicInfo.nickName=e.nickName,a.publicInfo.avatarImage=e.avatarImage,a.basic.phone=e.phone,a.basic.wechat=e.wechat,a.basic.email=e.email,a.basic.detailedIntroduction=e.detailedIntroduction,a.publicInfo.selfIntroduction=e.selfIntroduction,a.realVerify.phone=e.phoneNumber,a.realVerify.idCard=e.idCard,a.realVerify.bankCard=e.bankCard,a}function w(e,a){var t=e.account,r=e.basic,n=e.publicInfo,i=e.realVerify,s=a.baseInfo;s.passWord.value=t.passWord,s.name.value=r.name,s.nickName.value=n.nickName,s.gender.value=r.gender,s.birthday.value=r.birthday,s.avatarImage.value=n.avatarImage,n.avatarImage&&(s.avatarImage.props["file-list"]=[{url:Object({NODE_ENV:"production",VUE_APP_BASE_API:"http://www.leavesyesong.xyz/api",BASE_URL:"/"}).VUE_APP_HOST_NAME+n.avatarImage}]);var o=a.realVerify;o.phoneNumber.value=i.phone,o.idCard.value=i.idCard,o.bankCard.value=i.bankCard;var l=a.contact;l.phone.value=r.phone,l.wechat.value=r.wechat,l.email.value=r.email,l.selfIntroduction.value=n.selfIntroduction,l.detailedIntroduction.value=r.detailedIntroduction}var k=t("c24f"),_=t("a2c8"),O=t.n(_),C=t("5f87"),j={name:"consultant-baseinfo",components:{QuickForm:c["a"]},mixins:[x["a"]],data:function(){return Object(o["a"])({realVerified:!1,isReg:!1},y)},computed:Object(o["a"])({},Object(l["b"])(["user"])),created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var t,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e.isReg){a.next=7;break}return t=e.loading(),a.next=4,Object(k["e"])().catch((function(e){return t.close()}));case 4:r=a.sent,r.result&&(e.initData=r.msg,e.realVerified=r.msg.realVerified,w(r.msg,e._data)),t.close();case 7:case"end":return a.stop()}}),a)})))()},methods:{handleClickChangePwd:function(){},handleVerify:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var t,r,n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t=e.$refs.baseInfo.getFormData(),r=e.$refs.realVerify.getFormData(),n=e.loading(),a.next=5,Object(k["h"])(Object(o["a"])({name:t.name},r)).catch((function(e){return n.close()}));case 5:i=a.sent,i.result&&e.alert("认证成功"),n.close();case 8:case"end":return a.stop()}}),a)})))()},handleSave:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var t,r,n,s,l,c,u,d;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t=Object.keys(y),r=!0,a.next=4,Promise.all(t.map((function(a){return e.$refs[a].validate()}))).catch((function(e){console.log(e,"error"),r=!1}));case 4:if(n=a.sent,console.log(n,333),!r){a.next=23;break}if(s=e.loading(),l=Object(o["a"])(Object(o["a"])(Object(o["a"])({userName:e.user.userName},e.$refs.baseInfo.getFormData()),e.$refs.realVerify.getFormData()),e.$refs.contact.getFormData()),c=I(l,e.initData),c._id,u=Object(i["a"])(c,["_id"]),console.log(u,"参数"),d=null,!e.isReg){a.next=18;break}return a.next=15,Object(k["i"])(u).catch((function(e){return s.close()}));case 15:d=a.sent,a.next=21;break;case 18:return a.next=20,Object(k["k"])(u).catch((function(e){return s.close()}));case 20:d=a.sent;case 21:d.result&&(e.alert(e.isReg?"注册成功":"保存成功"),e.isReg?(Object(C["c"])(d.msg.token),e.$router.replace("/consultant/index")):e.$store.dispatch("user/setUser",{nickName:l.nickName,avatar:l.avatarImage})),s.close();case 23:case"end":return a.stop()}}),a)})))()},renderUpload:function(e){var a="";return this.baseInfo.avatarImage.value&&(a=Object({NODE_ENV:"production",VUE_APP_BASE_API:"http://www.leavesyesong.xyz/api",BASE_URL:"/"}).VUE_APP_HOST_NAME+this.baseInfo.avatarImage.value),console.log(a),e("el-Image",{style:"border-radius: 50%;width: 90px; height: 90px;overflow: hidden",attrs:{src:a||O.a}})},checkFile:function(e){return e.size>2097152?(this.alert("上传图片不能超过2M"),!1):!!["image/png","image/jpeg","image/gif"].includes(e.type)||(this.alert("请上传PNG、JPG、GIF类型文件"),!1)},afterUpload:function(e){this.baseInfo.avatarImage.value=e}},mounted:function(){var e=this;this.isReg=this.$route.path.includes("/register/consultant"),this.baseInfo.passWord.hide=!this.isReg;var a=this.baseInfo.avatarImage;a.props["before-upload"]=function(a){return e.uploadBefore(a)},a.props["on-success"]=function(a,t){return e.uploadSuccess(a,t)},a.render=this.renderUpload}},V=j,N=(t("d4ae"),t("2877")),S=Object(N["a"])(V,r,n,!1,null,"86ce53be",null);a["default"]=S.exports},a2c8:function(e,a,t){e.exports=t.p+"static/img/avatar-upload.80d54d4f.png"},b0c0:function(e,a,t){var r=t("83ab"),n=t("9bf2").f,i=Function.prototype,s=i.toString,o=/^\s*function ([^ (]*)/,l="name";r&&!(l in i)&&n(i,l,{configurable:!0,get:function(){try{return s.call(this).match(o)[1]}catch(e){return""}}})},b64b:function(e,a,t){var r=t("23e7"),n=t("7b0b"),i=t("df75"),s=t("d039"),o=s((function(){i(1)}));r({target:"Object",stat:!0,forced:o},{keys:function(e){return i(n(e))}})},d4ae:function(e,a,t){"use strict";var r=t("e624"),n=t.n(r);n.a},d81d:function(e,a,t){"use strict";var r=t("23e7"),n=t("b727").map,i=t("1dde"),s=t("ae40"),o=i("map"),l=s("map");r({target:"Array",proto:!0,forced:!o||!l},{map:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},ddb0:function(e,a,t){var r=t("da84"),n=t("fdbc"),i=t("e260"),s=t("9112"),o=t("b622"),l=o("iterator"),c=o("toStringTag"),u=i.values;for(var d in n){var f=r[d],p=f&&f.prototype;if(p){if(p[l]!==u)try{s(p,l,u)}catch(m){p[l]=u}if(p[c]||s(p,c,d),n[d])for(var b in i)if(p[b]!==i[b])try{s(p,b,i[b])}catch(m){p[b]=i[b]}}}},e624:function(e,a,t){}}]);