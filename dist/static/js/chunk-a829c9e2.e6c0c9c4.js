(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a829c9e2"],{"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"15fd":function(t,e,a){"use strict";function n(t,e){if(null==t)return{};var a,n,s={},i=Object.keys(t);for(n=0;n<i.length;n++)a=i[n],e.indexOf(a)>=0||(s[a]=t[a]);return s}function s(t,e){if(null==t)return{};var a,s,i=n(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(s=0;s<r.length;s++)a=r[s],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(i[a]=t[a])}return i}a.d(e,"a",(function(){return s}))},"1f36":function(t,e,a){"use strict";var n=a("550c"),s=a.n(n);s.a},"292b":function(t,e,a){},3050:function(t,e,a){},"3a57":function(t,e,a){"use strict";var n=a("8d32"),s=a.n(n);s.a},"3de1":function(t,e,a){"use strict";a("99af"),a("4160"),a("d81d"),a("b0c0"),a("ac1f"),a("1276"),a("159b");var n=a("5530"),s=a("c1df"),i=a.n(s);function r(t){return t.map((function(t){var e=t.consultant,a=(e.avatar,e.name,e.readme,"");if(t.confirmTimeout){var n=1e3*t.confirmTimeout-i()().valueOf();if(n>0){var s=n/36e5,r=Math.floor(s),o=Math.ceil(60*(s-r));a="还有".concat(r,"小时").concat(o,"分开始")}else a="已过期"}return{orderId:t._id,avatar:Object({NODE_ENV:"production",VUE_APP_BASE_API:"http://www.leavesyesong.xyz/api",BASE_URL:"/"}).VUE_APP_HOST_NAME+t.consumerAvatar,name:t.consumerNickName,cTime:i()(1e3*t.cTime).format("YYYY-MM-DD HH:mm:ss"),rest:a,startTime:t.startTime?i()(1e3*t.startTime).format("YYYY-MM-DD HH:mm:ss"):"",consumerTime:t.consumerTime?t.consumerTime.map((function(t){var e=1e3*t;return{text:"".concat(i()(e).format("YYYY-MM-DD")," ").concat(i()(e).format("HH:mm:ss"),"~").concat(i()(e).subtract(-90,"minutes").format("HH:mm:ss")),value:t}})):[],consultantTime:t.consultantTime?t.consultantTime.map((function(t){var e=1e3*t;return{text:"".concat(i()(e).format("YYYY-MM-DD")," ").concat(i()(e).format("HH:mm:ss"),"~").concat(i()(e).subtract(-90,"minutes").format("HH:mm:ss")),value:t}})):[],price:t.price,status:t.status,rate:t.evaluation?t.evaluation.point:0,complaint:t.complaint?t.complaint:{},evaluation:t.evaluation?t.evaluation:{}}}))}function o(t){return t.map((function(t){var e=t._id,a=t.roomId,s=t.cTime,r=t.startTime,o=t.consumerTime,l=t.consultantTime,c=t.price,d=t.status,u=t.evaluation,m=t.question,f=t.consultant,p=f.work,h=f.education,v="";if(t.startTime){var b=1e3*t.startTime-i()().valueOf();if(b>0){var g=b/36e5,_=Math.floor(g),j=Math.ceil(60*(g-_));v="还有".concat(_,"小时").concat(j,"分开始")}else v="已过期"}return Object(n["a"])(Object(n["a"])(Object(n["a"])({},p),h),{},{orderId:e,avatar:Object({NODE_ENV:"production",VUE_APP_BASE_API:"http://www.leavesyesong.xyz/api",BASE_URL:"/"}).VUE_APP_HOST_NAME+f.avatar,name:f.name,readme:f.readme,roomId:a,rest:v,startTime:i()(1e3*r).format("YYYY-MM-DD HH:mm:ss"),cTime:i()(1e3*s).format("YYYY-MM-DD HH:mm:ss"),consumerTime:o?o.map((function(t){var e=1e3*t;return{text:"".concat(i()(e).format("YYYY-MM-DD")," ").concat(i()(e).format("HH:mm:ss"),"~").concat(i()(e).subtract(-90,"minutes").format("HH:mm:ss")),value:t}})):[],consultantTime:l?l.map((function(t){var e=1e3*t;return{text:"".concat(i()(e).format("YYYY-MM-DD")," ").concat(i()(e).format("HH:mm:ss"),"~").concat(i()(e).subtract(-90,"minutes").format("HH:mm:ss")),value:t}})):[],price:c,status:d,rate:u?u.point:0,question:m?m.map((function(t){return{v:t}})):[]})}))}function l(t){var e=t.split(","),a="";return e.forEach((function(t,n){n==e.length-1?a+="status==".concat(t):a+="status==".concat(t,":")})),a}e["a"]={formatConsultantOrder:r,formatConsumerOrder:o,formatStatus:l}},"3f24":function(t,e,a){},"41ff":function(t,e,a){},"45c2":function(t,e,a){"use strict";var n=a("3f24"),s=a.n(n);s.a},4678:function(t,e,a){var n={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b4695","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b4695","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df48","./fa.js":"8df48","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b46","./gd.js":"f6b46","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function s(t){var e=i(t);return a(e)}function i(t){if(!a.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}s.keys=function(){return Object.keys(n)},s.resolve=i,t.exports=s,s.id="4678"},"550c":function(t,e,a){},"57bb":function(t,e,a){"use strict";var n=a("3050"),s=a.n(n);s.a},"5fdd":function(t,e,a){},6055:function(t,e,a){"use strict";var n=a("8b8d"),s=a.n(n);s.a},6080:function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));var n=a("b775");function s(t){return Object(n["a"])({url:"/consultant/platform/consultant/timeAvailable",method:"put",data:t})}},7319:function(t,e,a){"use strict";var n=a("8426"),s=a.n(n);s.a},"7db0":function(t,e,a){"use strict";var n=a("23e7"),s=a("b727").find,i=a("44d2"),r=a("ae40"),o="find",l=!0,c=r(o);o in[]&&Array(1)[o]((function(){l=!1})),n({target:"Array",proto:!0,forced:l||!c},{find:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),i(o)},"81d5":function(t,e,a){"use strict";var n=a("292b"),s=a.n(n);s.a},"841c":function(t,e,a){"use strict";var n=a("d784"),s=a("825a"),i=a("1d80"),r=a("129f"),o=a("14c3");n("search",1,(function(t,e,a){return[function(e){var a=i(this),n=void 0==e?void 0:e[t];return void 0!==n?n.call(e,a):new RegExp(e)[t](String(a))},function(t){var n=a(e,t,this);if(n.done)return n.value;var i=s(t),l=String(this),c=i.lastIndex;r(c,0)||(i.lastIndex=0);var d=o(i,l);return r(i.lastIndex,c)||(i.lastIndex=c),null===d?-1:d.index}]}))},8426:function(t,e,a){},"8b8d":function(t,e,a){},"8d32":function(t,e,a){},a434:function(t,e,a){"use strict";var n=a("23e7"),s=a("23cb"),i=a("a691"),r=a("50c4"),o=a("7b0b"),l=a("65f0"),c=a("8418"),d=a("1dde"),u=a("ae40"),m=d("splice"),f=u("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,h=Math.min,v=9007199254740991,b="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!m||!f},{splice:function(t,e){var a,n,d,u,m,f,g=o(this),_=r(g.length),j=s(t,_),x=arguments.length;if(0===x?a=n=0:1===x?(a=0,n=_-j):(a=x-2,n=h(p(i(e),0),_-j)),_+a-n>v)throw TypeError(b);for(d=l(g,n),u=0;u<n;u++)m=j+u,m in g&&c(d,u,g[m]);if(d.length=n,a<n){for(u=j;u<_-n;u++)m=u+n,f=u+a,m in g?g[f]=g[m]:delete g[f];for(u=_;u>_-n+a;u--)delete g[u-1]}else if(a>n)for(u=_-n;u>j;u--)m=u+n-1,f=u+a-1,m in g?g[f]=g[m]:delete g[f];for(u=0;u<a;u++)g[u+j]=arguments[u+2];return g.length=_-n+a,d}})},b00c:function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"a",(function(){return s}));var n=[{text:"已取消",value:"0",tag:"7"},{text:"待付款",value:"1"},{text:"待咨询师确认",value:"2"},{text:"待咨询者确认",value:"3"},{text:"待服务",value:"4"},{text:"服务中",value:"5"},{text:"待评价",value:"6"},{text:"已完成",value:"7",tag:"7"},{text:"投诉",value:"8",tag:"7"},{text:"未提现",value:"9"},{text:"待发放",value:"10"},{text:"已结算",value:"11"},{text:"待选择咨询师",value:"12"}],s=[{text:"男",value:"m"},{text:"女",value:"f"}]},b0c0:function(t,e,a){var n=a("83ab"),s=a("9bf2").f,i=Function.prototype,r=i.toString,o=/^\s*function ([^ (]*)/,l="name";n&&!(l in i)&&s(i,l,{configurable:!0,get:function(){try{return r.call(this).match(o)[1]}catch(t){return""}}})},c3ef:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticStyle:{padding:"30px"}},[a("pannel",{attrs:{pannels:t.pannels,selPannel:t.selPannel},on:{change:t.handlePannelChange}}),t.list.length?a(t.selPannel.component,{tag:"component",attrs:{pagination:t.pagination,query:t.query,immediatelyOrder:t.immediatelyOrder,list:t.list},on:{"condition-query":t.handleQueryByCondition}}):t._e(),0==t.list.length?a("el-card",{staticClass:"no-order"},[a("p",[t._v("暂无订单数据")])]):t._e()],1)},s=[],i=(a("4de4"),a("7db0"),a("4160"),a("ac1f"),a("1276"),a("159b"),a("96cf"),a("1da1")),r=a("456e"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",t._l(t.list,(function(e,n){return a("section",{key:n,staticClass:"order-item"},[a("div",{staticClass:"flex-hb row"},[a("span",[t._v("订单号："+t._s(e.orderId))]),a("span",[t._v("创建时间:"+t._s(e.cTime))]),a("span",[t._v("订单金额:"+t._s(e.price)+" RMB")])]),a("div",{staticClass:"flex-hb"},[a("div",{staticClass:"flex-vc"},[a("small-avatar",{attrs:{imgUrl:e.avatar}}),a("div",{staticClass:"user-name"},[t._v(t._s(e.name))])],1),a("div",[t._v(t._s(e.rest))]),a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.handleOpenDetail(e)}}},[t._v("订单详情")])],1)])})),0),a("div",{staticClass:"flex-he",staticStyle:{"margin-top":"20px"}},[a("el-pagination",t._g(t._b({ref:"pagination",attrs:{id:"pagin","page-sizes":t.pagination.pageSizes||[10,20,30,40],total:t.pagination.total,"current-page":t.pagination.pageIndex,"page-size":t.pagination.pageSize,layout:"prev, pager, next",background:"",small:""}},"el-pagination",t.pagination.props,!1),t.pagination.events))],1),a("detail",{attrs:{isShow:t.isShow,order:t.order},on:{close:t.handleCloseDetail}})],1)},l=[],c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"订单详情",visible:t.isShow,"before-close":t.handleClose,width:"800px",center:""},on:{"update:visible":function(e){t.isShow=e}}},[a("section",{staticClass:"modal-main"},[a("div",{staticClass:"flex"},[a("p",{staticClass:"order-no"},[t._v("订单号: "+t._s(t.order.orderId))]),a("div",[t._v("创建时间: "+t._s(t.order.cTime))])]),a("p",{staticClass:"time"},[t._v("咨询备选时间 (北京时间)：")]),a("ul",{staticClass:"flex"},t._l(t.order.consumerTime,(function(e,n){return a("li",{key:n,staticClass:"time-item"},[a("el-radio",{attrs:{label:n},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v(t._s(e.text))])],1)})),0),t.isShowCalendar?a("div",[a("calendar",{on:{"set-time":t.handleSetTime}})],1):t._e(),a("p",{staticClass:"select-other",on:{click:t.toggleTimePicker}},[t._v("选择其他时间"),a("i",{class:[t.isShowCalendar?"el-icon-arrow-up":"el-icon-arrow-down"]})]),a("div",{staticClass:"flex info-box"},[a("div",{staticClass:"head"},[a("div"),a("p",{staticClass:"role"},[t._v("咨询者")]),a("p",{staticClass:"name"})]),a("div",{staticClass:"info"},[a("div",{staticClass:"info-item"},[a("div",{staticClass:"title"},[t._v("最高学历")]),a("p",{staticClass:"desc"},[t._v("电子工程")])]),a("div",{staticClass:"info-item"},[a("div",{staticClass:"title"},[t._v("最高学历")]),a("p",{staticClass:"desc"},[t._v("电子工程")])]),a("div",{staticClass:"info-item"},[a("div",{staticClass:"title"},[t._v("最高学历")]),a("p",{staticClass:"desc"},[t._v("电子工程")])]),a("div",{staticClass:"info-item"},[a("div",{staticClass:"title"},[t._v("最高学历")]),a("p",{staticClass:"desc"},[t._v("电子工程")])]),a("div",{staticClass:"info-item"},[a("div",{staticClass:"title"},[t._v("最高学历")]),a("p",{staticClass:"desc"},[t._v("电子工程")])]),a("div",{staticClass:"info-item"},[a("div",{staticClass:"title"},[t._v("最高学历")]),a("p",{staticClass:"desc"},[t._v("电子工程")])])])])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t.times.length?a("el-button",{attrs:{loading:t.isLoading,size:"small",type:"primary"},on:{click:t.handleUpdateTime}},[t._v("提交等待咨询者确认")]):a("el-button",{attrs:{loading:t.isLoading,size:"small",type:"primary"},on:{click:t.handleConfirmTime}},[t._v("确认时间")])],1)])},d=[],u=(a("d81d"),a("a16a")),m=a("f8b7"),f=a("c1df"),p=a.n(f),h={props:["isShow","order"],components:{Calendar:u["a"]},data:function(){return{isLoading:!1,times:[],radio:-1,isShowCalendar:!1}},methods:{handleSetTime:function(t){this.times=t},handleClose:function(){this.$emit("close")},handleUpdateTime:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.isLoading){e.next=2;break}return e.abrupt("return",!1);case 2:return t.isLoading=!0,e.next=5,Object(m["l"])({orderId:t.order.orderId,consultantTime:t.times.map((function(t){return Math.ceil(t.value/1e3)}))}).catch((function(e){return t.isLoading=!1}));case 5:a=e.sent,a.result&&(t.alert("更新服务时间成功"),t.$emit("close",!0)),t.isLoading=!1;case 8:case"end":return e.stop()}}),e)})))()},handleConfirmTime:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t.radio<0)){e.next=3;break}return t.alert("请选择一个咨询备选时间"),e.abrupt("return",!1);case 3:if(!t.isLoading){e.next=5;break}return e.abrupt("return",!1);case 5:return t.isLoading=!0,e.next=8,Object(m["k"])({orderId:t.order.orderId,startTime:t.order.consumerTime[t.radio].value}).catch((function(e){return t.isLoading=!1}));case 8:a=e.sent,a.result&&(t.alert("更新服务时间成功"),t.$emit("close",!0)),t.isLoading=!1;case 11:case"end":return e.stop()}}),e)})))()},toggleTimePicker:function(){this.isShowCalendar=!this.isShowCalendar}}},v=h,b=(a("81d5"),a("2877")),g=Object(b["a"])(v,c,d,!1,null,"20f547c8",null),_=g.exports,j=a("115f"),x={name:"waiting-confirm",props:["list","pagination","query"],components:{Detail:_,SmallAvatar:j["a"]},data:function(){return{isShow:!1,order:{}}},methods:{handleEnterRoom:function(){this.$router.push("/consultant/room")},handleOpenDetail:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.isShow=!0,n=e.loading(),a.next=4,Object(m["i"])({orderId:t.orderId}).catch((function(t){return n.close()}));case 4:a.sent,e.order=t,n.close();case 7:case"end":return a.stop()}}),a)})))()},handleCloseDetail:function(t){this.isShow=!1,t&&this.query()},handleConfirmTime:function(t){this.isShow=!1}}},y=x,C=(a("d15f"),Object(b["a"])(y,o,l,!1,null,"1ebaf08a",null)),w=C.exports,S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.immediatelyOrder.orderId?a("el-card",{staticClass:"top-item"},[a("h-title",[t._v("即将开始的咨询")]),a("ul",{staticClass:"flex-hbc"},[a("li",[a("p",{staticStyle:{"margin-bottom":"10px"}},[t._v("订单号："+t._s(t.immediatelyOrder.orderId))]),a("div",{staticClass:"flex-vc"},[a("small-avatar",{attrs:{imgUrl:t.immediatelyOrder.avatar}}),a("div",{staticClass:"user-name"},[t._v(t._s(t.immediatelyOrder.name))])],1)]),a("li",[a("p",{staticStyle:{"margin-bottom":"10px"}},[t._v("创建时间："+t._s(t.immediatelyOrder.cTime))]),a("div",[t._v("开始时间："+t._s(t.immediatelyOrder.startTime))])]),a("li",[a("div",{staticStyle:{"margin-top":"30px"}},[t._v(t._s(t.immediatelyOrder.rest))])]),a("li",[t._v(t._s(t.immediatelyOrder.rest))]),a("li",[a("div",{staticStyle:{"margin-bottom":"10px","text-align":"right"}},[t._v("订单金额:"+t._s(t.immediatelyOrder.price)+" RMB")]),a("div",{staticClass:"flex-he"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.handleEnterRoom(t.immediatelyOrder.orderId)}}},[t._v("进入房间")]),a("el-button",{attrs:{size:"small"},on:{click:function(e){return t.handleOpenDetail(t.immediatelyOrder)}}},[t._v("订单详情")])],1)])])],1):t._e(),a("el-card",t._l(t.list,(function(e,n){return a("section",{key:n},[a("ul",{staticClass:"order-item flex-hbc"},[a("li",[a("p",{staticStyle:{"margin-bottom":"10px"}},[t._v("订单号："+t._s(e.orderId))]),a("div",{staticClass:"flex-vc"},[a("small-avatar",{attrs:{imgUrl:e.avatar}}),a("div",{staticClass:"user-name"},[t._v(t._s(e.name))])],1)]),a("li",[a("p",{staticStyle:{"margin-bottom":"10px"}},[t._v("创建时间："+t._s(e.cTime))]),a("div",[t._v("开始时间："+t._s(e.startTime))])]),a("li",[a("div",{staticStyle:{"margin-top":"30px"}},[t._v(t._s(e.rest))])]),a("li",[t._v(t._s(e.rest))]),a("li",[a("div",{staticStyle:{"margin-bottom":"10px","text-align":"right"}},[t._v("订单金额:"+t._s(e.price)+" RMB")]),a("div",{staticClass:"flex-he"},[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.handleOpenDetail(e)}}},[t._v("订单详情")])],1)])])])})),0),a("div",{staticClass:"flex-he",staticStyle:{"margin-top":"20px"}},[a("el-pagination",t._g(t._b({ref:"pagination",attrs:{id:"pagin","page-sizes":t.pagination.pageSizes||[10,20,30,40],total:t.pagination.total,"current-page":t.pagination.pageIndex,"page-size":t.pagination.pageSize,layout:"prev, pager, next",background:"",small:""}},"el-pagination",t.pagination.props,!1),t.pagination.events))],1),a("detail-modal",{attrs:{isShow:t.isShow,order:t.order},on:{close:t.handleCloseDetail}})],1)},k=[],O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"订单详情",visible:t.isShow,"before-close":t.handleClose,width:"700px",center:""},on:{"update:visible":function(e){t.isShow=e}}},[a("section",{staticClass:"modal-main"},[a("div",{staticClass:"flex"},[a("p",{staticClass:"order-no"},[t._v("订单号:"+t._s(t.order.orderId))]),a("div",[t._v("创建时间:"+t._s(t.order.cTime))])]),a("p",{staticClass:"time"},[t._v("原咨询时间 (北京时间):"+t._s(t.order.startTime))]),a("div",[a("calendar",{attrs:{change:t.isShow},on:{"set-time":t.handleSetTime}})],1),t._e(),t._e()]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{loading:t.isLoading,size:"small",type:"primary"},on:{click:t.handleCancel}},[t._v("订单取消")]),a("el-button",{attrs:{loading:t.isLoading,size:"small",type:"primary"},on:{click:t.handleChangeTime}},[t._v("时间调整")])],1)])},T=[],z={props:["isShow","order"],components:{Calendar:u["a"]},data:function(){return{isShowCalendar:!1,isLoading:!1,times:[]}},methods:{handleSetTime:function(t){this.times=t},handleClose:function(){this.$emit("close")},handleCancel:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.isLoading){e.next=2;break}return e.abrupt("return",!1);case 2:return t.isLoading=!0,e.next=5,Object(m["a"])({orderId:t.order.orderId}).catch((function(e){return t.isLoading=!1}));case 5:a=e.sent,a.result&&(t.alert("订单取消成功"),t.$emit("close",!0)),t.isLoading=!1;case 8:case"end":return e.stop()}}),e)})))()},handleChangeTime:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.times.length){e.next=3;break}return t.alert("请选择时间","warning"),e.abrupt("return",!1);case 3:if(!t.isLoading){e.next=5;break}return e.abrupt("return",!1);case 5:return t.isLoading=!0,e.next=8,Object(m["l"])({orderId:t.order.orderId,consultantTime:t.times.map((function(t){return Math.ceil(t.value/1e3)}))}).catch((function(e){return t.isLoading=!1}));case 8:a=e.sent,a.result&&(t.alert("更新时间成功"),t.$emit("close",!0)),t.isLoading=!1;case 11:case"end":return e.stop()}}),e)})))()},toggleTimePicker:function(){this.isShowCalendar=!this.isShowCalendar}}},D=z,R=(a("e9ee"),Object(b["a"])(D,O,T,!1,null,"022fa336",null)),I=R.exports,A={name:"waiting-service",props:["list","pagination","immediatelyOrder","query"],components:{DetailModal:I,SmallAvatar:j["a"]},data:function(){return{order:{},isShow:!1}},methods:{handleEnterRoom:function(t){this.$router.push("/consultant/room/".concat(t))},handleOpenDetail:function(t){this.order=t,this.isShow=!0},handleCloseDetail:function(t){this.isShow=!1,t&&this.query()}}},L=A,M=(a("6055"),Object(b["a"])(L,S,k,!1,null,"f98e8dd2",null)),E=M.exports,Y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",[a("section",{staticClass:"flex-hbc search"},[a("div",{staticClass:"flex-hbc"},[a("el-link",{attrs:{type:"primary",underline:!1}},[t._v("订单状态")]),a("el-select",{staticClass:"order-status",attrs:{placeholder:"",size:"small"},model:{value:t.search.status,callback:function(e){t.$set(t.search,"status",e)},expression:"search.status"}},t._l(t.orderStates,(function(t){return a("el-option",{key:t.value,attrs:{label:t.text,value:t.value}})})),1)],1),a("time-picker",{attrs:{times:t.times,curTime:t.search.curIndex},on:{change:t.handleTimeChange}}),a("el-date-picker",{staticStyle:{width:"230px"},attrs:{size:"small",type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:t.handleDateChange},model:{value:t.search.orderDate,callback:function(e){t.$set(t.search,"orderDate",e)},expression:"search.orderDate"}}),a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:t.handleSearch}},[t._v("查询")])],1),t._l(t.list,(function(e,n){return a("section",{key:n},[a("ul",{staticClass:"order-item flex-hbc"},[a("li",[a("p",{staticStyle:{"margin-bottom":"10px"}},[t._v("订单号："+t._s(e.orderId))]),a("div",{staticClass:"flex-vc"},[a("small-avatar",{attrs:{imgUrl:e.avatar}}),a("div",{staticClass:"user-name"},[t._v(t._s(e.name))])],1)]),a("li",[a("p",{staticStyle:{"margin-bottom":"10px"}},[t._v("创建时间："+t._s(e.cTime))]),a("div",[t._v("开始时间："+t._s(e.startTime))])]),a("li",{staticClass:"flex-hbc",staticStyle:{"margin-top":"30px"}},[a("p",{staticStyle:{"margin-right":"10px"}},[t._v("评价")]),a("el-rate",{attrs:{disabled:""},model:{value:e.rate,callback:function(a){t.$set(e,"rate",a)},expression:"o.rate"}})],1),a("li",[t._v(t._s(e.rest))]),a("li",[a("div",{staticStyle:{"margin-bottom":"10px","text-align":"right"}},[t._v("订单金额:"+t._s(e.price)+" RMB")]),a("div",{staticClass:"flex-he"},[a("el-button",{attrs:{size:"small",plain:"",type:"primary"},on:{click:function(a){return t.handleOpenDetail(e)}}},[t._v("订单详情")])],1)])])])}))],2),a("div",{staticClass:"flex-he",staticStyle:{"margin-top":"20px"}},[a("el-pagination",t._g(t._b({ref:"pagination",attrs:{id:"pagin","page-sizes":t.pagination.pageSizes||[10,20,30,40],total:t.pagination.total,"current-page":t.pagination.pageIndex,"page-size":t.pagination.pageSize,layout:"prev, pager, next",background:"",small:""}},"el-pagination",t.pagination.props,!1),t.pagination.events))],1),a("rate-modal",{attrs:{isShowRate:t.isShowRate,order:t.order},on:{close:t.handleCloseRate}}),a("arbitration-modal",{attrs:{isShowApply:t.isShowApply,order:t.order},on:{close:t.handleCloseApply}}),a("detail-modal",{attrs:{isShowDetail:t.isShowDetail,order:t.order},on:{close:t.handleCloseDetail,apply:t.handleShowArbitration,feedback:t.handleShowFeedback}})],1)},$=[],P=(a("841c"),a("5530")),H=a("15fd"),q=a("2909"),U=a("6174"),B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"评价反馈",visible:t.isShowRate,"before-close":t.handleClose,width:"560px",center:""},on:{"update:visible":function(e){t.isShowRate=e}}},[a("section",{staticClass:"modal-main"},[a("div",{staticClass:"flex-hb order-info"},[a("p",{staticClass:"order-no"},[t._v("订单号:"+t._s(t.order.orderId))]),a("div",[t._v("创建时间:"+t._s(t.order.cTime))])]),a("div",{staticClass:"flex rate"},[a("p",{staticStyle:{"margin-right":"10px"}},[t._v("评价:")]),a("el-rate",{attrs:{disabled:""},model:{value:t.order.point,callback:function(e){t.$set(t.order,"point",e)},expression:"order.point"}})],1),a("p",{staticClass:"desc"},[t._v("评价说明：order.content")]),a("p",{staticClass:"explain"},[t._v("反馈说明:")]),a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"",maxLength:300},model:{value:t.consultantReply,callback:function(e){t.consultantReply=e},expression:"consultantReply"}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{loading:t.isLoading,size:"small",type:"primary"},on:{click:t.handleFeedback}},[t._v("反馈")])],1)])},N=[],F={props:["isShowRate","order"],data:function(){return{isLoading:!1,consultantReply:""}},methods:{handleClose:function(){this.$emit("close")},handleFeedback:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.consultantReply){e.next=3;break}return t.alert("请填写反馈内容","warning"),e.abrupt("return",!1);case 3:if(!t.isLoading){e.next=5;break}return e.abrupt("return");case 5:return t.isLoading=!0,e.next=8,Object(m["j"])({content:t.consultantReply,orderId:t.order.orderId}).catch((function(e){return t.isLoading=!1}));case 8:a=e.sent,t.isLoading=!1,a.result&&(t.alert("反馈成功"),t.$emit("close",!0));case 11:case"end":return e.stop()}}),e)})))()}}},V=F,J=(a("3a57"),Object(b["a"])(V,B,N,!1,null,"0b039178",null)),Q=J.exports,W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"申请仲裁",visible:t.isShowApply,"before-close":t.handleClose,width:"560px",center:""},on:{"update:visible":function(e){t.isShowApply=e}}},[a("section",{staticClass:"modal-main"},[a("div",{staticClass:"flex-hb order-info"},[a("p",{staticClass:"order-no"},[t._v("订单号:"+t._s(t.order.orderId))]),a("div",[t._v("创建时间:"+t._s(t.order.cTime))])]),a("div",{staticClass:"flex rate"},[a("p",{staticStyle:{"margin-right":"10px"}},[t._v("投诉:")]),a("div",[t._v(t._s(t.order.complaintTitle))])]),a("p",{staticClass:"desc"},[t._v("投诉说明："+t._s(t.order.complaintContent))]),a("p",{staticClass:"explain"},[t._v("仲裁说明:")]),a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"",maxLength:300},model:{value:t.consultantReply,callback:function(e){t.consultantReply=e},expression:"consultantReply"}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{loading:t.isLoading,size:"small",type:"primary"},on:{click:t.handleApply}},[t._v("申请仲裁")])],1)])},G=[],K={props:["isShowApply","order"],data:function(){return{consultantReply:"",isLoading:!1}},methods:{handleClose:function(){this.$emit("close")},handleApply:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.consultantReply){e.next=3;break}return t.alert("请填写说明","warning"),e.abrupt("return",!1);case 3:if(!t.isLoading){e.next=5;break}return e.abrupt("return",!1);case 5:return t.isLoading=!0,e.next=8,Object(m["d"])({orderId:t.order.orderId,consultantReply:t.consultantReply}).catch((function(e){return t.isLoading=!1}));case 8:a=e.sent,a.result&&(t.alert("申请成功"),t.$emit("close",!0)),t.isLoading=!1;case 11:case"end":return e.stop()}}),e)})))()}}},X=K,Z=(a("7319"),Object(b["a"])(X,W,G,!1,null,"4c130ad8",null)),tt=Z.exports,et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"订单详情",visible:t.isShowDetail,"before-close":t.handleClose,width:"700px",center:""},on:{"update:visible":function(e){t.isShowDetail=e}}},[a("section",{staticClass:"modal-main"},[a("div",{staticClass:"flex",staticStyle:{"margin-bottom":"10px"}},[a("p",{staticClass:"order-no"},[t._v("订单号："+t._s(t.order.orderId))]),a("div",[t._v("创建时间:"+t._s(t.order.cTime))])]),t.order.complaintTitle?a("div",[a("div",{staticClass:"flex-vc rate"},[a("p",{staticClass:"order-no"},[t._v("投诉: "+t._s(t.order.complaintTitle))]),a("el-button",{attrs:{size:"small"},on:{click:t.handleApply}},[t._v("申请仲裁")])],1),a("p",{staticClass:"desc-p"},[t._v("投诉说明："+t._s(t.order.complaintContent))])]):t._e(),t.order.point?a("div",[a("div",{staticClass:"flex-vc rate"},[a("p",{staticStyle:{"margin-right":"10px"}},[t._v("评价:")]),a("el-rate",{staticStyle:{"margin-right":"40px"},attrs:{disabled:""},model:{value:t.order.point,callback:function(e){t.$set(t.order,"point",e)},expression:"order.point"}}),a("el-button",{attrs:{size:"small"},on:{click:t.handleFeedback}},[t._v("评价反馈")])],1),a("p",{staticClass:"desc-p"},[t._v("评价说明："+t._s(t.order.content))])]):t._e(),a("div",{staticClass:"flex info-box"},[a("div",{staticClass:"head"},[a("avatar",{attrs:{imgUrl:t.order.avatarImage}}),a("p",{staticClass:"role"},[t._v("咨询者")]),a("p",{staticClass:"name"},[t._v(t._s(t.order.name))])],1),a("div",{staticClass:"info"},[a("div",{staticClass:"info-item"},[a("div",{staticClass:"title"},[t._v("最高学历")]),a("p",{staticClass:"desc"},[t._v(t._s(t.order.country+" "+t.order.school+" "+t.order.discipline))])]),a("div",{staticClass:"info-item"},[a("div",{staticClass:"title"},[t._v("自我简介")]),a("p",{staticClass:"desc"},[t._v(t._s(t.order.selfIntroduction))])]),a("div",{staticClass:"info-item"},[a("div",{staticClass:"title"},[t._v("咨询问题")]),t._l(t.order.question,(function(e,n){return a("p",{key:n,staticClass:"desc"},[t._v(t._s(e))])}))],2)])])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.handleClose}},[t._v("关闭")])],1)])},at=[],nt=a("77c0"),st={props:["isShowDetail","order"],components:{Avatar:nt["a"]},data:function(){return{}},methods:{handleClose:function(){this.$emit("close")},handleConfirmTime:function(){this.$emit("confrim")},handleApply:function(){this.$emit("apply")},handleFeedback:function(){this.$emit("feedback")}}},it=st,rt=(a("57bb"),Object(b["a"])(it,et,at,!1,null,"6c14ad0d",null)),ot=rt.exports,lt=a("b00c"),ct={name:"finish-order",props:["list","pagination","query"],components:{TimePicker:U["a"],RateModal:Q,ArbitrationModal:tt,DetailModal:ot,SmallAvatar:j["a"]},data:function(){var t=p()().subtract(7,"day").startOf("day"),e=p()().subtract(15,"day").startOf("day"),a=p()().subtract(30,"day").startOf("day"),n=p()();return{order:{},isShowRate:!1,isShowApply:!1,isShowDetail:!1,search:{status:"",curIndex:"",orderDate:""},times:[{name:"7天",v:[t,n]},{name:"15天",v:[e,n]},{name:"30天",v:[a,n]}]}},computed:{orderStates:function(){return lt["b"].filter((function(t){return 7==t.tag}))}},methods:{handleTimeChange:function(t,e){this.search.orderDate=Object(q["a"])(t.v),this.search.curIndex=e},handleDateChange:function(t){this.search.curIndex=-1},handleOpenDetail:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,s,i,r,o,l,c,d;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.isShowDetail=!0,n=e.loading(),a.next=4,Object(m["i"])({orderId:t.orderId}).catch((function(t){return n.close()}));case 4:s=a.sent,s.result&&(i=t.complaint,r=t.evaluation,o=Object(H["a"])(t,["complaint","evaluation"]),l=s.msg.basic,c=l.highestEducation,d=Object(H["a"])(l,["highestEducation"]),e.order=Object(P["a"])(Object(P["a"])(Object(P["a"])(Object(P["a"])({complaintTitle:i.title,complaintContent:i.content},r),o),d),c)),n.close();case 7:case"end":return a.stop()}}),a)})))()},handleCloseDetail:function(){this.isShowDetail=!1},handleShowArbitration:function(){this.handleCloseDetail(),this.isShowApply=!0},handleShowFeedback:function(){this.handleCloseDetail(),this.isShowRate=!0},handleCloseRate:function(t){this.isShowRate=!1,t&&this.query()},handleCloseApply:function(t){this.isShowApply=!1,t&&this.query()},handleSearch:function(){var t=this.search,e=t.orderDate,a=t.status,n={from:e[0]?e[0].valueOf()/1e3:0,to:e[1]?Math.ceil(e[1].valueOf()/1e3):2601444690,condition:a?"status==".concat(a):"status==0:status==7:status==8"};this.$emit("condition-query",n)}}},dt=ct,ut=(a("45c2"),Object(b["a"])(dt,Y,$,!1,null,"5f0c3015",null)),mt=ut.exports,ft=a("3de1"),pt={name:"consultant-order",components:{Pannel:r["a"],WaitingConfirm:w,WaitingService:E,FinishOrder:mt},mounted:function(){var t="status==2",e=this.$route.query.status;e&&(t=this.getCondition(e),this.selPannel=this.pannels.find((function(t){return t.status==e}))),this.params={from:0,to:2601444690,condition:t},this.query()},data:function(){return{selPannel:{name:"待确认订单",status:"2",component:"waiting-confirm"},pannels:[{name:"待确认订单",status:"2",component:"waiting-confirm"},{name:"待服务订单",status:"4,5",component:"waiting-service"},{name:"已完成订单",status:"0,7,8",component:"finish-order"}],list:[],immediatelyOrder:{},pagination:{total:0,pageIndex:0,pageSize:10,events:{"current-change":this.handlePageChange,"size-change":this.handlePageSizeChange}}}},methods:{query:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n,s,i,r,o,l,c,d,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.loading(),n=t.pagination,s=n.pageIndex,i=n.pageSize,r=t.params,o=r.from,l=r.to,c=r.condition,e.next=5,Object(m["f"])({from:o||0,to:l||2601444690,page:s||0,limit:i||10,condition:c||""}).catch((function(t){return a.close()}));case 5:d=e.sent,d.result&&d.msg&&(t.pagination.total=d.msg.count,u=d.msg.list,"4,5"==status?(t.list=u.filter((function(t){return"4"==t.status})),t.immediatelyOrder=u.filter((function(t){return"5"==t.status}))):t.list=u,t.list=ft["a"].formatConsultantOrder(t.list)),a.close();case 8:case"end":return e.stop()}}),e)})))()},handleQueryByCondition:function(t){this.params=t,this.query()},handlePageChange:function(t){this.pagination.pageIndex=t,this.query()},handlePageSizeChange:function(t){this.pagination.pageSize=t,this.query()},handleClose:function(){this.isShowDetail=!1},getCondition:function(t){var e=t.split(","),a="";return e.forEach((function(t,n){n==e.length-1?a+="status==".concat(t):a+="status==".concat(t,":")})),a},handlePannelChange:function(t){var e=this.selPannel.status;if(t.status==e)return!1;this.selPannel=t,this.list=[],this.pagination.total=0,this.pagination.pageIndex=0,this.pagination.pageSize=10,this.params.from=0,this.params.to=2601444690,this.params.condition=this.getCondition(t.status),this.query()}}},ht=pt,vt=(a("1f36"),Object(b["a"])(ht,n,s,!1,null,"69413940",null));e["default"]=vt.exports},d15f:function(t,e,a){"use strict";var n=a("41ff"),s=a.n(n);s.a},e9ee:function(t,e,a){"use strict";var n=a("5fdd"),s=a.n(n);s.a}}]);